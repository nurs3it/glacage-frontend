import{v as K,R as N,r as S,V,W as G,d as T}from"./index.6d5ea256.js";var x={},R,H=/^-?\d*\.?\d+(px|%)$/;function W(r){var o=r?r.trim():"0px",e=o.split(/\s+/).map(function(w){if(!H.test(w))throw new Error("rootMargin must be a string literal containing pixels and/or percent values");return w}),i=e.shift(),s=e[0],f=s===void 0?i:s,d=e[1],_=d===void 0?i:d,c=e[2],b=c===void 0?f:c;return i+" "+f+" "+_+" "+b}function C(r,o){return Array.isArray(r)&&Array.isArray(o)&&r.length===o.length?r.some(function(e,i){return C(r[i],o[i])}):r!==o}var z=(R=Object.prototype,R.hasOwnProperty),J=R.toString;function Q(r){return r&&z.call(r,"ref")}function X(r){return!r||typeof r=="number"?r:r.join(",")}var y=new Map;function Y(r){r===void 0&&(r={});for(var o=r.root||null,e=W(r.rootMargin),i=Array.isArray(r.threshold)?r.threshold:[r.threshold!=null?r.threshold:0],s=y.keys(),f;f=s.next().value;){var d=o!==f.root||e!==f.rootMargin||C(i,f.thresholds);if(!d)return f}return null}function Z(r,o){var e=y.get(r);if(e){for(var i=e.values(),s=void 0;s=i.next().value;)if(s.target===o.target)return s}return null}function ee(r,o){for(var e=0;e<r.length;e++){var i=Z(o,r[e]);i&&i.handleChange(r[e])}}function U(r){var o=Y(r);if(o)return o;var e=new IntersectionObserver(ee,r);return y.set(e,new Set),e}function $(r){var o;r.observer&&!y.has(r.observer)&&y.set(r.observer,new Set),(o=y.get(r.observer))===null||o===void 0||o.add(r),r.observer.observe(r.target)}function q(r,o){if(y.has(r.observer)){var e=y.get(r.observer);e!=null&&e.delete(r)&&(e.size>0?r.observer.unobserve(o):(r.observer.disconnect(),y.delete(r.observer)))}}var re=globalThis&&globalThis.__extends||function(){var r=function(o,e){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,s){i.__proto__=s}||function(i,s){for(var f in s)Object.prototype.hasOwnProperty.call(s,f)&&(i[f]=s[f])},r(o,e)};return function(o,e){r(o,e);function i(){this.constructor=o}o.prototype=e===null?Object.create(e):(i.prototype=e.prototype,new i)}}(),te=["root","rootMargin","threshold"],ne=["root","rootMargin","threshold","disabled"],oe=function(r){return te.reduce(function(o,e){var i,s=e==="root"&&J.call(r.root)==="[object String]";return Object.assign(o,(i={},i[e]=s?document.querySelector(r[e]):r[e],i))},{})},ie=function(r){re(o,r);function o(){var e=r!==null&&r.apply(this,arguments)||this;return e.handleChange=function(i){e.props.onChange(i,e.externalUnobserve)},e.handleNode=function(i){var s=e.props.children;if(Q(s)){var f=s.ref;typeof f=="function"?f(i):f&&z.call(f,"current")&&(f.current=i)}if(e.targetNode=void 0,i){var d=K.exports.findDOMNode(i);d&&d.nodeType===1&&(e.targetNode=d)}},e.observe=function(){if(e.props.children==null||e.props.disabled)return!1;if(!e.targetNode)throw new Error("ReactIntersectionObserver: Can't find DOM node in the provided children. Make sure to render at least one DOM node in the tree.");return e.observer=U(oe(e.props)),e.target=e.targetNode,$(e),!0},e.unobserve=function(i){q(e,i)},e.externalUnobserve=function(){e.targetNode&&e.unobserve(e.targetNode)},e}return o.prototype.getSnapshotBeforeUpdate=function(e){var i=this;this.prevTargetNode=this.targetNode;var s=ne.some(function(f){return C(i.props[f],e[f])});return s&&this.prevTargetNode&&(e.disabled||this.unobserve(this.prevTargetNode)),s},o.prototype.componentDidUpdate=function(e,i,s){var f=!1;s||(f=this.prevTargetNode!==this.targetNode,f&&this.prevTargetNode!=null&&this.unobserve(this.prevTargetNode)),(s||f)&&this.observe()},o.prototype.componentDidMount=function(){this.observe()},o.prototype.componentWillUnmount=function(){this.targetNode&&this.unobserve(this.targetNode)},o.prototype.render=function(){var e=this.props.children;return e!=null?N.cloneElement(N.Children.only(e),{ref:this.handleNode}):null},o.displayName="IntersectionObserver",o}(N.Component),ae=function(){},se=function(r,o){var e=o===void 0?{}:o,i=e.root,s=e.rootMargin,f=e.threshold,d=e.disabled,_=S.exports.useRef(!1),c=S.exports.useRef({handleChange:function(p){r(p,ae)}}),b=S.exports.useCallback(function(){c.current.target&&_.current&&(q(c.current,c.current.target),_.current=!1)},[]);c.current.handleChange=function(h){r(h,b)};var w=function(){c.current.observer&&c.current.target&&!_.current&&($(c.current),_.current=!0)},M=S.exports.useMemo(function(){return f},[X(f)]),m=S.exports.useMemo(function(){if(d){b(),c.current.observer=void 0;return}var p=typeof i=="string"?document.querySelector(i):i,h=U({root:p,rootMargin:s,threshold:M});return c.current.observer=h,b(),w(),h},[i,s,M,d]),D=S.exports.useCallback(function(p){var h=p!=null&&c.current.target!==p;m||b(),h&&(b(),c.current.target=p,w()),p||(b(),c.current.target=void 0)},[m]);return[D,b]},ue=Object.freeze(Object.defineProperty({__proto__:null,default:ie,parseRootMargin:W,useIntersectionObserver:se},Symbol.toStringTag,{value:"Module"})),fe=V(ue);(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=void 0;var o=f(S.exports),e=i(fe);function i(t){return t&&t.__esModule?t:{default:t}}function s(){if(typeof WeakMap!="function")return null;var t=new WeakMap;return s=function(){return t},t}function f(t){if(t&&t.__esModule)return t;if(t===null||d(t)!=="object"&&typeof t!="function")return{default:t};var a=s();if(a&&a.has(t))return a.get(t);var u={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var v in t)if(Object.prototype.hasOwnProperty.call(t,v)){var l=n?Object.getOwnPropertyDescriptor(t,v):null;l&&(l.get||l.set)?Object.defineProperty(u,v,l):u[v]=t[v]}return u.default=t,a&&a.set(t,u),u}function d(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?d=function(u){return typeof u}:d=function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},d(t)}function _(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}function c(t,a){for(var u=0;u<a.length;u++){var n=a[u];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function b(t,a,u){return a&&c(t.prototype,a),u&&c(t,u),t}function w(t,a){return a&&(d(a)==="object"||typeof a=="function")?a:m(t)}function M(t){return M=Object.setPrototypeOf?Object.getPrototypeOf:function(u){return u.__proto__||Object.getPrototypeOf(u)},M(t)}function m(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function D(t,a){if(typeof a!="function"&&a!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(a&&a.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),a&&p(t,a)}function p(t,a){return p=Object.setPrototypeOf||function(n,v){return n.__proto__=v,n},p(t,a)}function h(t,a,u){return a in t?Object.defineProperty(t,a,{value:u,enumerable:!0,configurable:!0,writable:!0}):t[a]=u,t}var L=function(){return typeof window!="undefined"},A=function(t){D(a,t);function a(u){var n;return _(this,a),n=w(this,M(a).call(this,u)),h(m(n),"image",void 0),h(m(n),"handleOnlineStatus",function(){n.setState({isOnline:window.navigator.onLine})}),h(m(n),"loadImage",function(v,l){n.image&&(n.image.onload=null,n.image.onerror=null);var g=new Image;n.image=g,g.onload=n.onLoad,g.onerror=function(O){n.onError(O)},g.src=v,l&&(g.srcset=l.srcSet,g.sizes=l.sizes)}),h(m(n),"onLoad",function(){n.props.delay?n.setImageWithDelay():n.setImage()}),h(m(n),"setImageWithDelay",function(){setTimeout(function(){n.setImage()},n.props.delay)}),h(m(n),"setImage",function(){n._isMounted&&n.setState({image:n.image.src,loading:!1,srcSetData:{srcSet:n.image.srcset||"",sizes:n.image.sizes||""}},function(){window.removeEventListener("online",n.handleOnlineStatus),window.removeEventListener("offline",n.handleOnlineStatus)})}),h(m(n),"onError",function(v){var l=n.props.onError;l&&l(v)}),h(m(n),"handleIntersection",function(v,l,g){if(v.isIntersecting){var O=n.props,I=O.src,P=O.srcSetData;g&&(n.loadImage(I,P),l())}}),n._isMounted=!1,n.state={isOnline:L()?window.navigator.onLine:!0,image:u.placeholder,loading:!0,srcSetData:{srcSet:"",sizes:""}},n}return b(a,[{key:"componentDidMount",value:function(){this._isMounted=!0,L()&&(window.addEventListener("online",this.handleOnlineStatus),window.addEventListener("offline",this.handleOnlineStatus))}},{key:"componentDidUpdate",value:function(n){var v=this,l=this.props,g=l.src,O=l.placeholder,I=l.srcSetData;g!==n.src&&this.setState({image:O,loading:!0},function(){v.loadImage(g,I)})}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.image&&(this.image.onload=null,this.image.onerror=null),this.timeout&&window.clearTimeout(this.timeout),window.removeEventListener("online",this.handleOnlineStatus),window.removeEventListener("offline",this.handleOnlineStatus)}},{key:"render",value:function(){var n=this,v={onChange:function(B,F){return n.handleIntersection(B,F,n.state.isOnline)},rootMargin:this.props.rootMargin||"0% 0% 25%",threshold:this.props.threshold||[0],disabled:this.props.noLazyLoad||!1},l=this.state,g=l.image,O=l.loading,I=l.srcSetData,P=this.props,j=P.src,E=P.children;P.noRetry;var k=P.noLazyLoad;if(!E||typeof E!="function")throw new Error("ProgressiveImage requires a function as its only child");return k?E(j,!1,this.props.srcSetData):o.createElement(e.default,v,E(g,O,I))}}]),a}(o.Component);r.default=A})(x);var le=G(x);const ve=({image:r,className:o})=>{var e,i;return T(le,{threshold:[1],src:`${((e=r.attributes.formats.medium)==null?void 0:e.url)||((i=r.attributes.formats.small)==null?void 0:i.url)}`,placeholder:`${r.attributes.formats.thumbnail.url}`,children:s=>T("img",{draggable:!1,className:o,src:s,alt:`image-${o}`})})};export{ve as P};
