import{c as B,G as x,T as o,d as w,b as A,S as C,u as T,A as $,I as D}from"./index.5b485e58.js";import{u as G,b as L,c as W,r as u,Z as k,$ as y,P as j,d as a,j as c,I as E,a0 as F,F as S}from"./index.6d5ea256.js";import{g as q}from"./index.785ed1b3.js";import{P as z}from"./index.3534371a.js";import{C as J}from"./index.d7683f42.js";const M="aq93p",R="GuaC9";var P={title:M,padding:R};const _=()=>{const r=G(),{products:i,category:p}=L(e=>e.products),d=e=>{r(k(e)),e.length>0&&r(y(e[0].attributes.category))},l=W(q,{manual:!0,onSuccess:e=>{d(e.data.data)}}),s=u.exports.useCallback(e=>{l.runAsync(e)},[]);return u.exports.useEffect(()=>()=>{r(k([])),r(y({}))},[]),{products:i,category:p,getByCategoryId:s,loading:l.loading,error:l.error}},H="mAy5c",V="ab2l-",Y="_9ASfl",Z="oIugg",K="GPaof",O="cxS9M",Q="LcsJJ",U="Ds1Rh",X="_1nVYk";var t={root:H,wrapper:V,imageWrapper:Y,image:Z,info:K,action:O,price:Q,title:U,subtitle:X},aa="/assets/addFilled.f028439f.svg";const ea=({product:r,id:i})=>{const p=j(),{cart:d,addProduct:l,changeCount:s}=B(),[e,N]=u.exports.useState(!1),[n,b]=u.exports.useState({}),[g,v]=u.exports.useState(!1),I=()=>{p(`/product/${i}`)},m=()=>{v(!0),l({id:i,stock:r}),setTimeout(()=>{v(!1)},1e3)};return u.exports.useEffect(()=>{N(d.some(f=>(f.id===Number(i)&&b(f),f.id===Number(i))))},[d,i]),a(x,{className:t.root,item:!0,xs:6,md:4,sm:6,children:c("div",{className:t.wrapper,children:[a("div",{className:t.imageWrapper,onClick:I,children:a(z,{className:t.image,image:r.images.data[0]})}),c("div",{className:t.info,children:[a(o,{className:t.title,variant:"h6",children:r.name}),a(o,{className:t.subtitle,variant:"subtitle1",children:r.shortDescription||" "})]}),c("div",{className:t.action,children:[c(o,{className:t.price,variant:"h6",children:[r.price,"\u20B8"]}),!e&&a(w,{onClick:m,size:"small",children:a(E,{icon:aa})}),g&&e&&a(w,{onClick:m,size:"small",children:a(A,{dark:!0})}),!g&&e&&n&&n.count&&a(J,{isMini:!0,count:(n==null?void 0:n.count)||0,onChangeCount:f=>s(i,f)})]})]})})},h=()=>a(x,{className:t.root,item:!0,xs:6,md:4,sm:6,children:c("div",{className:t.wrapper,children:[a("div",{className:t.imageWrapper,children:a(C,{sx:{height:"100%",width:"100%"},animation:"wave",variant:"rectangular"})}),c("div",{className:t.info,children:[a(C,{animation:"wave",width:"50%",children:a(o,{variant:"h6",children:"."})}),a(C,{animation:"wave",width:"40%",children:a(o,{variant:"subtitle1",children:"."})})]}),a("div",{className:t.action,children:a(C,{animation:"wave",width:"30%",children:a(o,{variant:"h6",children:"."})})})]})}),ca=()=>{var N,n,b,g,v,I;const{mobile:r}=T(),{id:i}=F(),{products:p,getByCategoryId:d,loading:l,category:s,error:e}=_();return u.exports.useEffect(()=>{d(i)},[d,i]),a($,{pageTitle:((n=(N=s==null?void 0:s.data)==null?void 0:N.attributes)==null?void 0:n.name)||"",children:c(D,{children:[!r&&((g=(b=s==null?void 0:s.data)==null?void 0:b.attributes)!=null&&g.name?a(o,{className:`${P.title} ${P.padding}`,variant:"h4",children:((I=(v=s==null?void 0:s.data)==null?void 0:v.attributes)==null?void 0:I.name)||""}):a(C,{className:P.padding,animation:"wave",sx:{margin:"0 auto"},width:"40%",children:a(o,{variant:"h3",children:"."})})),a(x,{container:!0,children:l||e?c(S,{children:[a(h,{}),a(h,{}),a(h,{}),a(h,{}),a(h,{}),a(h,{})]}):a(S,{children:p.map(m=>a(ea,{id:m.id,product:m.attributes},m.id))})})]})})};export{ca as default};
